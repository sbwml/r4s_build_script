--- a/src/mod/common/rfc7915/6to4.c
+++ b/src/mod/common/rfc7915/6to4.c
@@ -203,7 +203,7 @@ static verdict compute_flowix64(struct x
 	hdr6 = pkt_ip6_hdr(&state->in);
 
 	flow4->flowi4_mark = state->in.skb->mark;
-	flow4->flowi4_tos = xlat_tos(&state->jool.globals, hdr6);
+	flow4->flowi4_dscp = xlat_tos(&state->jool.globals, hdr6);
 	flow4->flowi4_scope = RT_SCOPE_UNIVERSE;
 	flow4->flowi4_proto = xlat_proto(hdr6);
 	/*
@@ -645,7 +645,7 @@ static verdict ttp64_ipv4_external(struc
 
 	hdr4->version = 4;
 	hdr4->ihl = 5;
-	hdr4->tos = flow4->flowi4_tos;
+	hdr4->tos = flow4->flowi4_dscp;
 	hdr4->tot_len = cpu_to_be16(state->out.skb->len);
 	generate_ipv4_id(state, hdr4, hdr_frag);
 	hdr4->frag_off = xlat_frag_off(hdr_frag, state);
--- a/src/mod/common/timer.c
+++ b/src/mod/common/timer.c
@@ -63,5 +63,5 @@ int jtimer_setup(void)
  */
 void jtimer_teardown(void)
 {
-	del_timer_sync(&timer);
+	timer_delete_sync(&timer);
 }
